<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://pixijs.com/pixi.js"></script>
  <title>index</title>
</head>

<body>
  <%- include('./layout/header'); -%>


    <div class="container-fluid p-0">
      <div class="scene"></div>
    </div>

    <div class="container-fluid p-0">
      <!-- "bus-title -->
      <div class="bus-title d-flex text-center align-items-center">
        <div class="IntercityBus text-white fw-bold">
          <!--p-4  -->
          <i class="fa-solid fa-bus"></i>
          <span class="chinese-title">客運</span>
          <p class="english-title m-0">Intercity Bus</p>
        </div>
        <div class="Destination">
          <p class="chinese-title m-0">開往</p>
          <p class="english-title m-0">Destination</p>
        </div>
        <div class="Gate">
          <p class="chinese-title m-0">站口</p>
          <p class="english-title m-0">Gate</p>
        </div>
        <div class="Dep">
          <p class="chinese-title m-0">發車時刻</p>
          <p class="english-title m-0">Dep.Time</p>
        </div>
      </div>

      <!-- bus-content1 -->
      <div class="bus-content d-flex text-center fw-bold">
        <div class="IntercityBus">
          <p class="number">2061</p>
          <span class="chinese-title">國光客運</span>
          <p class="english-title">Kuo-Kuang</p>
        </div>
        <div class="Destination align-self-center">
          <p class="chinese-title">基隆→市民大道</p>
          <p class="english-title">Kerun→FourSt</p>
        </div>
        <div class="Gate align-self-center">
          <p class="chinese-title">06</p>
        </div>
        <div class="Dep align-self-center">
          <p class="chinese-title">11:30</p>
        </div>
      </div>

      <!-- bus-content2 -->
      <div class="bus-content d-flex text-center fw-bold">
        <div class="IntercityBus">
          <p class="number">2061</p>
          <span class="chinese-title">國光客運</span>
          <p class="english-title">Kuo-Kuang</p>
        </div>
        <div class="Destination align-self-center">
          <p class="chinese-title">基隆→市民大道</p>
          <p class="english-title">Kerun→FourSt</p>
        </div>
        <div class="Gate align-self-center">
          <p class="chinese-title">06</p>
        </div>
        <div class="Dep align-self-center">
          <p class="chinese-title">11:30</p>
        </div>
      </div>

      <!-- bus-content3 -->
      <div class="bus-content d-flex text-center fw-bold">
        <div class="IntercityBus">
          <p class="number">2061</p>
          <span class="chinese-title">國光客運</span>
          <p class="english-title">Kuo-Kuang</p>
        </div>
        <div class="Destination align-self-center">
          <p class="chinese-title">基隆→市民大道</p>
          <p class="english-title">Kerun→FourSt</p>
        </div>
        <div class="Gate align-self-center">
          <p class="chinese-title">06</p>
        </div>
        <div class="Dep align-self-center">
          <p class="chinese-title">11:30</p>
        </div>
      </div>
    </div>


    <div class="contianer-fluid speaker d-flex align-items-center">
      <img src="/assets/images/speaker.svg" alt="speaker">
      <div class="speaker-content-wrap">
        <p class="speaker-content ticker-item text-white m-0" id="marqueeContainer"><canvas id="marqueeCanvas"></canvas>
        </p>
      </div>

    </div>


    <%- include('./layout/footer'); -%>

      <script type="module" src="../main.js"></script>
      <script>
        const marqueeContainer = document.querySelector('.speaker-content-wrap');
        const canvas = document.getElementById('marqueeCanvas');
        const ctx = canvas.getContext('2d');
        const marqueeText = '親愛的乘客們，1813號公車將於5分鐘內抵達，請要搭乘的乘客盡快前往月台候車。';
        const textColor = '#FFFFFF';
        const backgroundColor = '#54585A';
        const fontSize = 20;

        // 計算 marqueeText 移動速度
        const marqueeSpeed = 2;
        const textSpeed = marqueeSpeed * 1; // 這裡假設文字速度是 marqueeSpeed 的一倍 2

        canvas.width = marqueeContainer.clientWidth;
        canvas.height = marqueeContainer.clientHeight;

        ctx.font = `${fontSize}px Arial`;
        ctx.fillStyle = textColor;

        function draw() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillText(marqueeText, draw.position, fontSize + canvas.height / 2);

          draw.position -= textSpeed; // 使用文字的速度

          if (draw.position < -ctx.measureText(marqueeText).width) {
            draw.position = canvas.width;
          }

          requestAnimationFrame(draw);
        }

        draw.position = canvas.width;

        draw();


      </script>
</body>

</html>